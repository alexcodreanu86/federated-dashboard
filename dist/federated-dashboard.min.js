!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Dashboard"),Dashboard.Controller=function(){function a(){}return a.initialize=function(a){return this.bindMenuButton(),Dashboard.Widgets.Manager.generateWrappers(a)},a.bindMenuButton=function(){return $("[data-id=menu-button]").click(function(a){return function(){return a.toggleSidenav()}}(this))},a.toggleSidenav=function(){return Dashboard.Display.isSidenavDisplayed()?this.removeSidenav():this.setupSidenav()},a.setupSidenav=function(){return Dashboard.Display.showSidenav(this.getButtons()),Dashboard.Sidenav.Controller.bindSetupWidgets(),Dashboard.Widgets.Manager.enterEditMode(),Dashboard.Widgets.Sorter.setupSortable()},a.getButtons=function(){return this.sidenavButtons||(this.sidenavButtons=Dashboard.Widgets.Manager.getSidenavButtons())},a.removeSidenav=function(){return Dashboard.Display.removeSidenav(),Dashboard.Widgets.Manager.exitEditMode(),Dashboard.Widgets.Sorter.disableSortable()},a}()}.call(this),function(){namespace("Dashboard"),Dashboard.Display=function(){function a(){}return a.showSidenav=function(a){var b;return b=new EJS({url:"scripts/dashboard/sidenav/sidenavContent.ejs"}).render({buttons:a}),$("[data-id=widget-buttons]").html(b)},a.removeSidenav=function(){return $("[data-id=widget-buttons]").empty()},a.isSidenavDisplayed=function(){return $("[data-id=widget-buttons]").html().length>0},a}()}.call(this),function(){namespace("Dashboard.Sidenav"),Dashboard.Sidenav.Controller=function(){function a(){}return a.bindSetupWidgets=function(){return $("[data-id=widget-buttons] li span").click(function(){return Dashboard.Sidenav.Controller.processClickedButton(this)})},a.processClickedButton=function(a){var b,c;return b=a.getAttribute("data-id"),c=this.getWidgetName(b),Dashboard.Widgets.Manager.setupWidget(c)},a.getWidgetName=function(a){return a.split("-")[0]},a}()}.call(this),function(){namespace("Dashboard.SpeechRecognition"),Dashboard.SpeechRecognition.Controller=function(){function a(){}return a.commands={"open menu":function(){return a.showSidenav()},"close menu":function(){return a.removeSidenav()},"open :widget widget":function(b){return a.clickOn("[data-id="+b.toLowerCase()+"-widget]")},"search :widget for *search":function(b,c){return a.searchWidgetFor(b.toLowerCase(),c.toLowerCase())},"close :widget widget":function(b){return a.closeWidget(b.toLowerCase())},"move :widget widget :direction":function(b,c){return a.dragWidget(b.toLowerCase(),c.toLowerCase())},"do something cool":function(){return a.showSurprize()}},a.showSidenav=function(){return Dashboard.Controller.setupSidenav()},a.removeSidenav=function(){return Dashboard.Controller.removeSidenav()},a.initialize=function(){return annyang?(annyang.addCommands(this.commands),annyang.debug(),annyang.start()):void 0},a.searchWidgetFor=function(a,b){return $("[name="+a+"-search]").val(b),this.clickOn("[data-id="+a+"-button]")},a.openWidget=function(a){return this.clickOn("[data-id="+a+"-widget]")},a.closeWidget=function(a){return this.clickOn("[data-name="+a+"].widget-close")},a.clickOn=function(a){return $(a).click()},a.dragWidget=function(a,b){switch(b[0]){case"r":return this.dragRight(a);case"l":return this.dragLeft(a);case"d":return this.dragDown(a);case"u":return this.dragUp(a);default:return console.log("invalid Direction")}},a.dragRight=function(a){return $("[data-name="+a+"].widget-handle").simulate("drag",{dx:350})},a.dragLeft=function(a){return $("[data-name="+a+"].widget-handle").simulate("drag",{dx:-350})},a.dragDown=function(a){var b,c,d;return b=$("[data-id="+a+"-slot]"),c=b.parent(),d=c.height(),$("[data-id="+a+"-slot]").simulate("drag",{dy:d})},a.dragUp=function(a){var b,c,d;return c=$("[data-id="+a+"-slot]"),d=c.parent(),b=c.offset().top-d.offset().top,$("[data-id="+a+"-slot]").simulate("drag",{dy:-b})},a.showSurprize=function(){return window.open("","_self",""),window.close()},a}()}.call(this),function(){namespace("Dashboard.Widgets"),Dashboard.Widgets.Display=function(){function a(){}var b,c;return c=4,b=["col0","col1","col2"],a.containerCount=0,a.generateContainer=function(a){var b,c;return b=this.getFirstAvailableColumn(a),b?(c=this.getNextContainer(),this.incrementContainerCount(),$("[data-id="+b+"]").append("<li data-id="+c+" data-size="+a+"></li>"),"[data-id="+c+"]"):void 0},a.getFirstAvailableColumn=function(a){return this.getAllAvailableColumns(a)[0]},a.getAllAvailableColumns=function(a){return _.filter(b,function(b){return function(c){return b.hasEnoughSpace(c,a)}}(this))},a.hasEnoughSpace=function(a,b){var d;return d=this.getColumnSlots(a),c>=d+b},a.getColumnSlots=function(a){var b,c;return c=0,b=$("[data-id="+a+"] li"),_.forEach(b,function(a){return function(b){return c+=a.getContainerSize(b)}}(this)),c},a.getContainerSize=function(a){return parseInt(a.getAttribute("data-size"))},a.getNextContainer=function(){return"container-"+this.containerCount},a.incrementContainerCount=function(){return this.containerCount++},a.showAvailableColumns=function(a){var b;return b=this.getAllAvailableColumns(a),_.forEach(b,function(a){return function(b){return a.setAsDroppable(b)}}(this))},a.setAsDroppable=function(a){return $("[data-id="+a).addClass("droppable-column")},a}()}.call(this),function(){namespace("Dashboard.Widgets"),Dashboard.Widgets.Manager=function(){function a(){}return a.generateWrappers=function(a){return this.wrappers={pictures:this.wrapWidget(Pictures,"pictures",2,"a48194703ae0d0d1055d6ded6c4c9869"),weather:this.wrapWidget(Weather,"weather",1,"12ba191e2fec98ad"),twitter:this.wrapWidget(Twitter,"twitter",2,""),stock:this.wrapWidget(Stock,"stock",2,"")},a&&a.defaults?this.addDefaultsToWrappers():void 0},a.wrapWidget=function(a,b,c,d){return new Dashboard.Widgets.Wrapper({widget:a,name:b,slotSize:c,apiKey:d})},a.addDefaultsToWrappers=function(){return this.wrappers.pictures.defaultValue="dirtbikes",this.wrappers.twitter.defaultValue="bikes",this.wrappers.weather.defaultValue="Chicago IL",this.wrappers.stock.defaultValue="AAPL YHOO"},a.enterEditMode=function(){return this.mapOnAllWidgets("showWidgetForm")},a.exitEditMode=function(){return this.mapOnAllWidgets("hideWidgetForm")},a.getSidenavButtons=function(){return this.mapOnAllWidgets("widgetLogo")},a.mapOnAllWidgets=function(a){var b;return b=this.getListOfWidgets(),_.map(b,function(b){return b[a]()})},a.getListOfWidgets=function(){return _.values(this.wrappers)},a.setupWidget=function(a){var b,c;return c=this.wrappers[a],b=Dashboard.Widgets.Display.generateContainer(c.slotSize),b?c.setupWidgetIn(b):void 0},a}()}.call(this),function(){namespace("Dashboard.Widgets"),Dashboard.Widgets.Sorter=function(){function a(){}return a.setupSortable=function(){return $(".widget-list").sortable({connectWith:".widget-list",handle:".widget-header",start:function(a,b){return Dashboard.Widgets.Sorter.startSorting(a,b,this)},receive:function(a,b){return Dashboard.Widgets.Sorter.receiveSortable(a,b,this)},stop:this.disableDroppableColumns}),$(".widget-list").sortable("enable")},a.disableSortable=function(){return $(".widget-list").sortable("disable")},a.startSorting=function(a,b){return this.draggedItemSize=parseInt(b.item.attr("data-size")),Dashboard.Widgets.Display.showAvailableColumns(this.draggedItemSize)},a.receiveSortable=function(a,b,c){return $(c).attr("class").match("droppable-column")||$(b.sender).sortable("cancel"),this.disableDroppableColumns()},a.disableDroppableColumns=function(){return $(".droppable-column").removeClass("droppable-column")},a}()}.call(this),function(){namespace("Dashboard.Widgets"),Dashboard.Widgets.Templates=function(){function a(){}return a}()}.call(this),function(){namespace("Dashboard.Widgets"),Dashboard.Widgets.Wrapper=function(){function a(a){this.widget=a.widget,this.widgetApiKey=a.apiKey,this.name=a.name,this.slotSize=a.slotSize}var b;return b="50",a.prototype.setupWidgetIn=function(a){return this.container=a,this.widget.Controller.setupWidgetIn(this.container,this.widgetApiKey,this.defaultValue)},a.prototype.widgetLogo=function(){var a;return a=""+this.name+"-widget",this.widget.Display.generateLogo({dataId:a,width:b})},a.prototype.hideWidgetForm=function(){return this.widget.Controller.hideForms()},a.prototype.showWidgetForm=function(){return this.widget.Controller.showForms()},a}()}.call(this);