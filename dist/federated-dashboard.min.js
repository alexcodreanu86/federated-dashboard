!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Dashboard"),Dashboard.Controller=function(){function a(){}return a.initialize=function(){return this.bind(),this.generateWrappedWidgets()},a.bind=function(){return $("[data-id=pictures-widget]").click(function(a){return function(){return a.checkWidget("pictures")}}(this)),$("[data-id=weather-widget]").click(function(a){return function(){return a.checkWidget("weather")}}(this)),$("[data-id=stock-widget]").click(function(a){return function(){return a.checkWidget("stock")}}(this)),$("[data-id=twitter-widget]").click(function(a){return function(){return a.checkWidget("twitter")}}(this)),$("[data-id=menu-button]").click(function(a){return function(){return a.toggleSidenav()}}(this))},a.unbind=function(){return $("[data-id=pictures-widget]").unbind("click"),$("[data-id=weather-widget]").unbind("click"),$("[data-id=stock-widget]").unbind("click"),$("[data-id=twitter-widget]").unbind("click"),$("[data-id=menu-button]").unbind("click")},a.rebind=function(){return this.unbind(),this.bind()},a.checkWidget=function(a){var b;return b=this.wrappedWidgets[a],b.isActive?void 0:this.setupWidget(b)},a.setupWidget=function(a){var b;return b=Dashboard.Display.generateAvailableSlotFor(a),b?a.setupWidgetIn(b):void 0},a.toggleSidenav=function(){return Dashboard.Display.isSidenavDisplayed()?this.removeSidenav():this.showSidenav(),this.rebind()},a.removeSidenav=function(){return Dashboard.Display.removeSidenav()},a.showSidenav=function(){var a;return a=this.getSidenavButtons(),Dashboard.Display.showSidenav(a)},a.getSidenavButtons=function(){var a;return a=_.values(this.generateWrappedWidgets()),_.map(a,function(a){return a.widgetLogo()})},a.generateWrappedWidgets=function(){return this.wrappedWidgets={pictures:this.wrapWidget(Pictures,"pictures",3,"a48194703ae0d0d1055d6ded6c4c9869"),weather:this.wrapWidget(Weather,"weather",1,"12ba191e2fec98ad"),twitter:this.wrapWidget(Twitter,"twitter",2,""),stock:this.wrapWidget(Stock,"stock",2,"")}},a.wrapWidget=function(a,b,c,d){return new Dashboard.WidgetWrapper({widget:a,name:b,numberOfSlots:c,apiKey:d})},a.closeWidget=function(a){var b;return b=this.wrappedWidgets[a],Dashboard.Display.emptySlotsInColumn(b.numberOfSlots,b.containerColumn),b.closeWidget()},a}()}.call(this),function(){var a;namespace("Dashboard"),a=3,Dashboard.Display=function(){function b(){}return b.takenSlots={col0:0,col1:0,col2:0},b.emptySlotsInColumn=function(a,b){return this.takenSlots[b]-=a},b.populateWidget=function(a){return $("[data-id=widget-display]").html(a)},b.showSidenav=function(a){var b;return b=new EJS({url:"scripts/dashboard/templates/sidenavContent.ejs"}).render({buttons:a}),$("[data-id=side-nav]").html(b)},b.removeSidenav=function(){return $("[data-id=side-nav]").empty()},b.isSidenavDisplayed=function(){return $("[data-id=side-nav]").html().length>0},b.generateAvailableSlotFor=function(a){var b,c,d;return c=""+a.name+"-slot",d=a.numberOfSlots,b=this.getAvailableColumn(d),b?(this.addWidgetContainerToColumn(c,b,d),["[data-id="+c+"]",b]):void 0},b.addWidgetContainerToColumn=function(a,b,c){return $("[data-id="+b+"]").append("<div data-id='"+a+"'></div>"),this.takenSlots[b]+=c},b.getAvailableColumn=function(b){var c;return c=_.map(this.takenSlots,function(c,d){return a>=c+b?d:void 0}),_.find(c,function(a){return a})},b}()}.call(this),function(){}.call(this),function(){var a,b,c;namespace("Dashboard"),b=0,a=1,c="50",Dashboard.WidgetWrapper=function(){function d(a){this.widget=a.widget,this.widgetApiKey=a.apiKey,this.name=a.name,this.numberOfSlots=a.numberOfSlots}return d.prototype.isActive=!1,d.prototype.setupWidgetIn=function(c){return this.containerName=c[b],this.containerColumn=c[a],this.isActive=!0,this.widget.Controller.setupWidgetIn(this.containerName,this.widgetApiKey)},d.prototype.widgetLogo=function(){var a;return a=""+this.name+"-widget",this.widget.Display.generateLogo({dataId:a,width:c})},d.prototype.closeWidget=function(){return $(this.containerName).remove(),this.isActive=!1},d}()}.call(this);